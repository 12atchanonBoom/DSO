<div class="card">
  <div class="card-header">
    <h2>üë§ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
    <button class="btn-add" (click)="openAddModal()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
  </div>
  <input type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ username..." [(ngModel)]="searchText" />

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Username</th>
        <th>Role</th>
        <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of filteredUsers; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.role || '-' }}</td>
        <td>
          <button (click)="openEditModal(user)">‚úèÔ∏è</button>
          <button (click)="deleteUser(user.id)">üóëÔ∏è</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç user -->
<div *ngIf="modalOpen" class="modal-overlay">
  <div class="modal">
    <form (ngSubmit)="onSubmitUser()">
      <h3>{{ isEditMode ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà' }}</h3>
      <div class="form-row">
        <label>Username:
          <input type="text" [(ngModel)]="form.username" name="username" required />
        </label>
      </div>
      <div class="form-row">
        <label>Password:
          <input type="password" [(ngModel)]="form.password" name="password" required />
        </label>
      </div>
      <div class="form-row">
        <label>Role:
          <select [(ngModel)]="form.role" name="role">
            <option value="admin">admin</option>
            <option value="user">user</option>
          </select>
        </label>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn-confirm">{{ isEditMode ? '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å' : '‡πÄ‡∏û‡∏¥‡πà‡∏°' }}</button>
        <button type="button" class="btn-cancel" (click)="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      </div>
    </form>
  </div>
</div>
